<!-- Loading State -->
<div class="loading-card" *ngIf="loading">
  <div class="spinner"></div>
  <p>Analizando riesgo de churn con IA...</p>
</div>

<!-- Predicci贸n Completa -->
<div class="prediction-card" *ngIf="prediccion && !loading">
  <!-- Header con datos del cliente -->
  <div class="header">
    <div class="client-info">
      <h2>{{ prediccion.nombreCompleto }}</h2>
      <p class="client-id">ID: {{ prediccion.customerId }}</p>
    </div>
    <span class="risk-badge" [ngClass]="prediccion.riskLevel === 'Alto' ? 'HIGH' : 'LOW'">
      {{ prediccion.riskLevel === 'Alto' ? 'RIESGO ALTO' : 'RIESGO BAJO' }}
    </span>
  </div>

  <!-- Informaci贸n b谩sica del cliente -->
  <div class="client-details">
    <div class="detail-item">
      <span class="label">Correo:</span>
      <span class="value">{{ prediccion.correoElectronico }}</span>
    </div>
    <div class="detail-item">
      <span class="label">Documento:</span>
      <span class="value">{{ prediccion.documentoIdentidad }}</span>
    </div>
  </div>

  <!-- M茅tricas de Predicci贸n -->
  <div class="metrics-section">
    <h3> An谩lisis de Churn</h3>
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-label">Probabilidad de Abandono</div>
        <div class="metric-value" [ngClass]="getProbabilityClass()">
          {{ (prediccion.churnProbability * 100).toFixed(1) }}%
        </div>
        <div class="progress-bar">
          <div class="progress-fill"
               [style.width.%]="prediccion.churnProbability * 100"
               [ngClass]="getProbabilityClass()">
          </div>
        </div>
      </div>

      <div class="metric-card">
        <div class="metric-label">Predicci贸n</div>
        <div class="metric-value">
          {{ prediccion.prediction === 1 ? 'Probable Abandono' : 'Cliente Estable' }}
        </div>
      </div>
    </div>
  </div>

  <!-- Estrategia de Retenci贸n -->
  <div class="strategy-section">
    <h3> Estrategia de Retenci贸n</h3>
    <div class="strategy-badge" [ngClass]="getStrategyClass()">
      {{ prediccion.estrategiaRetencion }}
    </div>
  </div>

  <!-- Recomendaciones -->
  <div class="recommendations-section">
    <h3> Recomendaciones</h3>
    <div class="recommendation-box">
      <p>{{ prediccion.recomendacion }}</p>
    </div>
  </div>
</div>
